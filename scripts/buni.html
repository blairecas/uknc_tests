<!DOCTYPE html>
<html>
<body>

<style>
#canvas { border: #aaa 1px solid; background-color:#000; }
</style>

<script type="text/javascript">

    var canvas = null;
    var ctx = null;
    var idata = null;

    var centerX = 0.0;
    var centerY = 0.0;
    var scaleX = 0.0;
    var scaleY = 0.0;

    const n = 200;
    const r = 2*Math.PI/256.0;
    var x = 0;
    var u = 0;
    var v = 0;
    var t = 0;

function doDrawing ()
{
    const bdata = idata.data;
    // clear data
    for (let i=0; i<bdata.length; i++) bdata[i] = 0;
    // draw universe
    for (let i=0; i<10; i++)
    {
        for (let j=0; j<n; j++)
        {
            u = Math.sin(i+v) + Math.sin(r*i+x);
            v = Math.cos(i+v) + Math.cos(r*i+x);
            x = u + t;
            let iaddr = 4*(parseInt(centerX+u*scaleX) + canvas.width*parseInt(centerY+v*scaleY));
            bdata[iaddr+0] = i;
            bdata[iaddr+1] = j;
            bdata[iaddr+2] = 255;
            bdata[iaddr+3] = 255;
        }
    }
    t = t + 0.01;
    ctx.putImageData(idata, 0, 0);
    if (t<10) setTimeout(doDrawing, 100);
}

window.addEventListener("load", (event) => {
    canvas = document.getElementById("canvas");
    ctx = canvas.getContext("2d");
    idata = ctx.getImageData(0, 0, canvas.width, canvas.height);
    centerX = canvas.width / 2.0;
    centerY = canvas.height / 2.0;
    scaleX = canvas.width / 4.0;
    scaleY = canvas.height / 4.0;
    console.log(centerX, centerY, scaleX, scaleY);
    doDrawing();
});

</script>

</body>
<canvas id="canvas" width="256" height="256"></canvas>
</html>